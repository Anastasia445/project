<!--<div *ngIf="isLoading" class="spinner">
  <mat-progress-spinner 
    color="primary" 
    mode="indeterminate"> 
  </mat-progress-spinner>
</div>-->
<mat-dialog-content class="mat-typography">
<div class="editPlan">
<!--<div *ngIf="!clickEdit" class="component">
  <mat-form-field appearance="fill">
      <mat-label>Выберите неделю:</mat-label>
      <input matInput (dateChange)="chouseWeek()" [min]="minDate" [max]="maxDate" [(ngModel)]="week" [matDatepickerFilter]="myFilter" [matDatepicker]="dp3" disabled>
      <mat-datepicker-toggle  matSuffix [for]="dp3"></mat-datepicker-toggle>
      <mat-datepicker  #dp3 disabled="false"></mat-datepicker>
    </mat-form-field>
</div>-->

<form [formGroup]="formGroups" (submit)="onSubmitGroups()">

  <!--<div *ngIf="clickEdit && this.roles ==='ROLE_MODERATOR'" class="groups">
    <button mat-raised-button color="primary" (click)="printPage()">
      Печать
    </button>
    </div>-->

  <div *ngIf="clickEdit" class="component">
    <mat-form-field class="example-full-width">
      <mat-label>Название плана:</mat-label>
      <input readonly #name formControlName="name" matInput type="text">
    </mat-form-field>
  </div>
   <div *ngIf="!clickEdit" class="component">
    <mat-form-field class="example-full-width">
      <mat-label>Название плана:</mat-label>
      <input #name formControlName="name" matInput type="text">
    </mat-form-field>
  </div>

  <div class="mat-elevation-z8 tablePlan printMe">
    <table mat-table [dataSource]="dataSource">
      
      <ng-container matColumnDef="subject">
        <th mat-header-cell *matHeaderCellDef> <strong>Предмет</strong> </th>
        <td mat-cell *matCellDef="let element" formArrayName="subjects">  
          <mat-form-field *ngIf="clickEdit" [formGroupName]="0" class="example-full-width" >
            <input readonly matInput #name formControlName="name">
          </mat-form-field>
          <mat-form-field *ngIf="!clickEdit" [formGroupName]="0" class="example-full-width" >
            <input matInput #name formControlName="name">
          </mat-form-field>
        </td>
      </ng-container>

      <ng-container matColumnDef="day1" >
        <th mat-header-cell *matHeaderCellDef >
          <div formArrayName="days">
            <div  [formGroupName]="0">
              <strong>Понедельник</strong>
                <input readonly matInput formControlName="day">
            </div>
          </div> </th>
        <td mat-cell *matCellDef="let element" formArrayName="days">  
          <mat-form-field *ngIf="clickEdit" class="example-full-width"  [formGroupName]="0">
            <textarea readonly matInput #plans formControlName="plans"></textarea>
          </mat-form-field>
          <mat-form-field *ngIf="!clickEdit" class="example-full-width"  [formGroupName]="0">
            <textarea matInput #plans formControlName="plans"></textarea>
          </mat-form-field>
        </td>
      </ng-container>
      <ng-container matColumnDef="day2">
        <th mat-header-cell *matHeaderCellDef>
          <div formArrayName="days">
            <div  [formGroupName]="1">
              <strong>Вторник</strong>
                <input readonly matInput formControlName="day">
            </div>
          </div> </th>
        <td mat-cell *matCellDef="let element" formArrayName="days">  
          <mat-form-field *ngIf="clickEdit" class="example-full-width" [formGroupName]="1">
            <textarea readonly matInput #plans formControlName="plans"></textarea>
          </mat-form-field>
          <mat-form-field *ngIf="!clickEdit" class="example-full-width" [formGroupName]="1">
            <textarea matInput #plans formControlName="plans"></textarea>
          </mat-form-field>
        </td>
      </ng-container>
      <ng-container matColumnDef="day3">
        <th mat-header-cell *matHeaderCellDef>
          <div formArrayName="days">
            <div  [formGroupName]="2">
              <strong>Среда</strong>
                <input readonly matInput formControlName="day">
            </div>
          </div> </th>
        <td mat-cell *matCellDef="let element" formArrayName="days">  
          <mat-form-field *ngIf="clickEdit" class="example-full-width"  [formGroupName]="2">
            <textarea matInput readonly #plans formControlName="plans"></textarea>
          </mat-form-field>
          <mat-form-field *ngIf="!clickEdit" class="example-full-width"  [formGroupName]="2">
            <textarea matInput #plans formControlName="plans"></textarea>
          </mat-form-field>
        </td>
      </ng-container>
      <ng-container matColumnDef="day4">
        <th mat-header-cell *matHeaderCellDef> 
          <div formArrayName="days">
            <div  [formGroupName]="3">
              <strong>Четверг</strong>
                <input readonly matInput formControlName="day">
            </div>
          </div> </th>
        <td mat-cell *matCellDef="let element" formArrayName="days">  
          <mat-form-field *ngIf="clickEdit" [formGroupName]="3" class="example-full-width">
            <textarea readonly matInput #plans formControlName="plans"></textarea>
          </mat-form-field>
          <mat-form-field *ngIf="!clickEdit" [formGroupName]="3" class="example-full-width">
            <textarea matInput #plans formControlName="plans"></textarea>
          </mat-form-field>
        </td>
      </ng-container>
      <ng-container matColumnDef="day5" >
        <th mat-header-cell *matHeaderCellDef> 
          <div formArrayName="days">
            <div  [formGroupName]="4">
              <strong>Пятница</strong>
                <input readonly matInput formControlName="day">
            </div>
          </div> </th>
        <td mat-cell *matCellDef="let element" formArrayName="days">  
          <mat-form-field *ngIf="clickEdit"  class="example-full-width"  [formGroupName]="4">
            <textarea readonly matInput #plans formControlName="plans"></textarea>
          </mat-form-field>
          <mat-form-field *ngIf="!clickEdit" [formGroupName]="3" class="example-full-width">
            <textarea matInput #plans formControlName="plans"></textarea>
          </mat-form-field>
        </td>
      </ng-container>
      

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
  <br>
  
   <!--  <div *ngIf="!change" class="mat-elevation-z8 tablePlan">
    <table mat-table [dataSource]="dataSource">
      
      <ng-container matColumnDef="subject">
        <th mat-header-cell *matHeaderCellDef> <strong>Предмет</strong> </th>
        <td mat-cell *matCellDef="let element" formArrayName="subjects">  
          <mat-form-field  [formGroupName]="0" class="example-full-width" >
            <input matInput #name formControlName="name">
          </mat-form-field>
        </td>
      </ng-container>

      <ng-container matColumnDef="day1" >
        <th mat-header-cell *matHeaderCellDef > <strong>Понедельник({{ chouseDate | date:'dd-MM-yyyy' }})</strong> </th>
        <td mat-cell *matCellDef="let element" formArrayName="days">  
          <mat-form-field  class="example-full-width"  [formGroupName]="0">
            <mat-label>Планы:</mat-label>
            <textarea matInput #plans formControlName="plans"></textarea>
          </mat-form-field>
        </td>
      </ng-container>
      <ng-container matColumnDef="day2">
        <th mat-header-cell *matHeaderCellDef> <strong>Вторник({{ chouseDate2 | date:'dd-MM-yyyy' }})</strong> </th>
        <td mat-cell *matCellDef="let element" formArrayName="days">  
          <mat-form-field class="example-full-width" [formGroupName]="1">
            <mat-label>Планы:</mat-label>
            <textarea matInput #plans formControlName="plans"></textarea>
          </mat-form-field>
        </td>
      </ng-container>
      <ng-container matColumnDef="day3">
        <th mat-header-cell *matHeaderCellDef> <strong>Среда({{ chouseDate3 | date:'dd-MM-yyyy' }})</strong> </th>
        <td mat-cell *matCellDef="let element" formArrayName="days">  
          <mat-form-field class="example-full-width"  [formGroupName]="2">
            <mat-label>Планы:</mat-label>
            <textarea matInput #plans formControlName="plans"></textarea>
          </mat-form-field>
        </td>
      </ng-container>
      <ng-container matColumnDef="day4">
        <th mat-header-cell *matHeaderCellDef> <strong>Четверг({{ chouseDate4 | date:'dd-MM-yyyy' }})</strong> </th>
        <td mat-cell *matCellDef="let element" formArrayName="days">  
          <mat-form-field  [formGroupName]="3" class="example-full-width">
            <mat-label>Планы:</mat-label>
            <textarea matInput #plans formControlName="plans"></textarea>
          </mat-form-field>
        </td>
      </ng-container>
      <ng-container matColumnDef="day5" >
        <th mat-header-cell *matHeaderCellDef> <strong>Пятница({{ chouseDate5 | date:'dd-MM-yyyy' }})</strong> </th>
        <td mat-cell *matCellDef="let element" formArrayName="days">  
          <mat-form-field  [formGroupName]="4" class="example-full-width">
            <mat-label>Планы:</mat-label>
            <textarea matInput #plans formControlName="plans"></textarea>
          </mat-form-field>
        </td>
      </ng-container>
      

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
  <br>-->
  
<mat-dialog-actions align="start">
  <div class="editPlan" >
    <button *ngIf="clickEdit && this.roles ==='ROLE_MODERATOR'" mat-raised-button color="primary" (click)="edit()">
      Редактировать
    </button>
    <button *ngIf="!clickEdit" mat-raised-button color="primary" type="submit" id="submitDetails"
    name="submitDetails">
      Сохранить
    </button>
    &nbsp;&nbsp;&nbsp;
    <button mat-raised-button color="primary"  mat-dialog-close >
      Закрыть
    </button>
  </div>
 </mat-dialog-actions>
</form>
  <br>
</div>
</mat-dialog-content>